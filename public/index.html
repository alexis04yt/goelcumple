<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bienvenido a mi cumple</title>

<!-- Google Fonts y estilos Swiper/AOS -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght @400;600&family=Montserrat:wght @300;400;600&display=swap" rel="stylesheet">
<link href="https://unpkg.com/aos @2.3.1/dist/aos.css" rel="stylesheet">

<link rel="stylesheet" href="style.css">
</head>

<body>

<!-- MODAL CONFIRMAR -->
<div id="rsvpModal">
  <div class="modal-content">
    <h2 class="title">Confirmaci√≥n de Asistencia</h2>
    <p class="subtitle">Por favor, completa los datos para confirmar üíå</p>

    <!-- FORMULARIO CON SOLO RADIO BUTTONS -->
    <form id="attendanceForm">
      <!-- Nombre de la familia -->
      <div style="margin-bottom:15px; text-align:left;">
        <label for="nombreFamilia">Nombre de la Familia:</label>
        <input type="text" id="nombreFamilia" name="nombreFamilia" required>
      </div>

      <!-- Radio buttons alineados -->
      <div style="margin-bottom:15px; text-align:left;">
        <label>¬øConfirman asistencia?</label>
        <div style="display:flex; gap:20px; margin-top:5px;">
          <label style="display:flex; align-items:center; gap:5px;">
            <input type="radio" id="asisteSi" name="confirmacionAsistencia" value="S√≠" required>
            S√≠
          </label>
          <label style="display:flex; align-items:center; gap:5px;">
            <input type="radio" id="asisteNo" name="confirmacionAsistencia" value="No">
            No
          </label>
        </div>
      </div>

      <button type="submit">Enviar Confirmaci√≥n</button>
    </form>

    <p id="message" style="margin-top: 20px; font-weight:bold;"></p>
    <p style="margin-top:10px;"><a href="ver_datos.html">Ver todas las confirmaciones</a></p>
  </div>
</div>


<!-- HERO -->
<section class="hero">
  <div class="hero-content" data-aos="fade-up">
    <p>EST√ÅS INVITADO</p>
    <h1>A MI CUMPLEA√ëOS</h1>
    <p>Un D√≠a para celebrar mis 5 a√±itos</p>
  </div>
</section>

<!-- SOBRE -->
<section>
  <div class="container">
    <h2 class="title" data-aos="fade-up">Sobre el Evento</h2>
    <p class="subtitle" data-aos="fade-up">
      M√∫sica, Pastel y muchos juegos para celebrar mi cumplea√±os.
    </p>

    <div class="details">
      <div class="detail-box">üìÖ<br>7 Febrero 2026</div>
      <div class="detail-box">‚è∞<br>18:30</div>
      <div class="detail-box">üìç<br>Santa Rosa- Barrio Venezuela Elevaci√≥n</div>
    </div>
  </div>
</section>

<!-- GALER√çA -->
<section>
  <div class="container">
    <h2 class="title">Galer√≠a</h2>

    <div class="image-grid">
        <img src="images/gallery/image1.jpeg" alt="Imagen de la galer√≠a 1">
        <img src="images/gallery/image2.jpeg" alt="Imagen de la galer√≠a 2">
        <img src="images/gallery/image3.jpeg" alt="Imagen de la galer√≠a 3">
        <img src="images/gallery/image4.jpeg" alt="Imagen de la galer√≠a 4">
    </div>
  </div>
</section>

<footer>
¬© 2026 Gael 
</footer>

<!-- SCRIPTS -->
<script src="https://unpkg.com/aos @2.3.1/dist/aos.js"></script>
<script>
AOS.init({duration:1000,once:true});
</script>



<script>
// Modal y formulario de asistencia
const modal = document.getElementById('rsvpModal');
const attendanceForm = document.getElementById('attendanceForm');
const messageElement = document.getElementById('message');
const SUBMITTED_FLAG = 'hasSubmittedAttendance';

// Mostrar modal despu√©s de 10 segundos, solo si no se ha enviado antes
setTimeout(() => {
  if (localStorage.getItem(SUBMITTED_FLAG) !== 'true') {
    modal.style.display = 'flex';
    document.body.classList.add('modal-open');
  }
}, 3000);

// Manejar env√≠o del formulario
attendanceForm.addEventListener('submit', async (event) => {
  event.preventDefault();

  const nombreFamilia = document.getElementById('nombreFamilia').value;
  const confirmacionAsistencia = document.querySelector('input[name="confirmacionAsistencia"]:checked');

  if (!nombreFamilia || !confirmacionAsistencia) {
      messageElement.textContent = 'Por favor, complete todos los campos.';
      messageElement.style.color = 'red';
      return;
  }

  const formData = {
      nombreFamilia: nombreFamilia,
      confirmacionAsistencia: confirmacionAsistencia.value
  };

  try {
      const response = await fetch(`/submit-data`, {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
      });

      const result = await response.json();

      if (response.ok) {
          messageElement.textContent = result.message;
          messageElement.style.color = 'green';
          attendanceForm.reset();
          localStorage.setItem(SUBMITTED_FLAG, 'true'); // Set flag on successful submission
      } else {
          messageElement.textContent = `Error: ${result.message}`;
          messageElement.style.color = 'red';
      }
  } catch (error) {
      console.error('Error submitting form:', error);
      messageElement.textContent = 'Error de conexi√≥n con el servidor.';
      messageElement.style.color = 'red';
  }

  // Close modal after 2 seconds (or after successful/failed submission)
  setTimeout(() => {
    modal.style.display = 'none';
    document.body.classList.remove('modal-open');
    messageElement.textContent = '';
  }, 2000);
});
</script>

</body>
</html>
